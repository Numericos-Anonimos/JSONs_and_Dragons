{
    "Paladino": {
        "hitDiceValue": 10,
        "metadata": {
            "subclass_features_levels": [3, 5, 7, 9]
        },
        "level_0": {
            "operations": [
                { "action": "INCREMENT", "property": "proficiency.wis.save", "formula": 1 },
                { "action": "INCREMENT", "property": "proficiency.cha.save", "formula": 1 },
                { "action": "SET", "property": "proficiency.armor.Pesada.multiplier", "value": 1 },
                { 
                    "action": "CHOOSE_MAP", "n": 2, "label": "Perícias de Paladino",
                    "options": ["Atletismo", "Intimidação", "Intuição", "Medicina", "Persuasão", "Religião"],
                    "operations": [{"action": "SET", "property": "proficiency.skill.{THIS}.multiplier", "value": 1}]
                },
                { 
                    "action": "CHOOSE_OPERATIONS", "n": 1, "label": "Equipamento Inicial A",
                    "options": [
                        {
                            "label": "Escudo e Arma Marcial",
                            "operations": [
                                { "action": "ADD_ITEM", "query": "items/Escudo" },
                                { "action": "CHOOSE_MAP", "n": 1, "label": "Arma Marcial",
                                    "options": {"action": "REQUEST", "query": "itens/metadata.category == 'Marcial'/keys"},
                                    "operations": [{"action": "ADD_ITEM", "query": "itens/{THIS}"}]
                                }
                            ]
                        },
                        {
                            "label": "Duas Armas Marciais",
                            "operations": [
                                { "action": "CHOOSE_MAP", "n": 2, "label": "Arma Marcial",
                                    "options": {"action": "REQUEST", "query": "itens/metadata.category == 'Marcial'/keys"},
                                    "operations": [{"action": "ADD_ITEM", "query": "itens/{THIS}"}]
                                }
                            ]
                        }
                    ]
                },
                { 
                    "action": "CHOOSE_OPERATIONS", "n": 1, "label": "Equipamento Inicial B",
                    "options": [
                        {
                            "label": "Cinco Azagaias",
                            "operations": [{ "action": "ADD_ITEM", "amount": 5, "query": "items/Azagaia" }]
                        },
                        {
                            "label": "Arma Simples Corpo-a-Corpo",
                            "operations": [
                                { "action": "CHOOSE_MAP", "n": 1, "label": "Arma Simples Corpo-a-Corpo",
                                    "options": {"action": "REQUEST", "query": "itens/metadata.category == 'Simples'/keys"},
                                    "operations": [{"action": "ADD_ITEM", "query": "itens/{THIS}"}]
                                }
                            ]
                        }
                    ]
                },
                { 
                    "action": "CHOOSE_OPERATIONS", "n": 1, "label": "Equipamento Inicial C",
                    "options": [
                        { "label": "Pacote de Sacerdote", "operations": [{ "action": "ADD_ITEM", "query": "items/Pacote de Sacerdote" }] },
                        { "label": "Pacote de Aventureiro", "operations": [{ "action": "ADD_ITEM", "query": "items/Pacote de Aventureiro" }] }
                    ]
                },
                { "action": "ADD_ITEM", "query": "items/Cota de malha" },
                { "action": "ADD_ITEM", "name": "Símbolo Sagrado (Foco Arcano)", "query": "items/Símbolo Sagrado" }
            ]
        },
        "level_1": {
            "operations": [
                { "action": "SET", "property": "properties.level.Paladino", "value": 1 },
                { "action": "INCREMENT", "property": "properties.level", "formula": "{properties.level.Paladino}"},
                { 
                    "action": "FOR_EACH", "list": ["Leve", "Media", "Escudo"],
                    "operations": [{ "action": "SET", "property": "proficiency.armor.{THIS}.multiplier", "value": 1 }]
                },
                { 
                    "action": "FOR_EACH", "list": ["Simples", "Marciais"],
                    "operations": [{ "action": "SET", "property": "proficiency.weapon.{THIS}.multiplier", "value": 1 }]
                },
                {
                    "action": "ADD_FEATURE", 
                    "name": "Sentido Divino",
                    "description": "Com uma ação, você pode expandir sua consciência para detectar forças do mal e do bem...",
                    "counter": "resources.sentido_divino",
                    "operations": [
                        { "action": "SET", "property": "resources.sentido_divino", "type": "counter", "formula": "max(1, 1 + {attributes.cha.modifier})", "recoversOn": "long_rest" },
                        { "action": "ADD_ACTION", "name": "Sentido Divino", "cost": [{ "resource": "sentido_divino", "amount": 1}, {"action": "action"}]}
                    ]
                },
                {
                    "action": "ADD_FEATURE",
                    "name": "Cura pelas Mãos",
                    "description": "Você tem uma reserva de poder curativo que pode usar para restaurar pontos de vida.",
                    "counter": "resources.cura_pelas_maos",
                    "operations": [
                        { "action": "SET", "property": "resources.cura_pelas_maos", "type": "counter", "formula": "5 * {properties.level.Paladino}", "recoversOn": "long_rest" },
                        { "action": "ADD_ACTION", "name": "Cura pelas Mãos", "cost": [{"resource": "cura_pelas_maos", "amount": "x"}, {"action": "action"}] }
                    ]
                }
            ]
        },
        "level_2": {
            "operations": [
                { "action": "INCREMENT", "property": "properties.level.Paladino", "value": 1 },
                { 
                    "action": "CHOOSE_MAP", "n": 1, "label": "Estilo de Luta",
                    "options": { "action": "REQUEST", "query": "features/metadata.type == 'fighting_style' AND 'paladin' in metadata.classes/keys"},
                    "operations": [{ "action": "IMPORT", "query": "features/{THIS}"}]
                },
                {
                    "action": "ADD_FEATURE",
                    "name": "Conjuração",
                    "description": "Você aprende a extrair magia divina através de meditação e oração.",
                    "operations": [
                        {
                            "action": "ADD_SPELLCASTING", 
                            "name": "Paladino",
                            "can_multiclass": true,
                            "multiclass_formula": "floor({properties.level.Paladino} / 2)",
                            "spellcasting_modifier": "{attributes.cha.modifier}",
                            "spell_save_dc": "8 + {properties.proficiency_bonus} + {attributes.cha.modifier}",
                            "spell_attack_modifier": "{properties.proficiency_bonus} + {attributes.cha.modifier}",
                            "spells_prepared": "max(1, {attributes.cha.modifier} + floor({properties.level.Paladino} / 2))",
                            "spells_known": "infinity",
                            "spellSlotsRecoverOn": "long_rest",
                            "spellbook_query": "spells/'Paladino' in metadata.classes/keys",
                            "spellSlots": [
                                [0, 0, 0, 0, 0, 0, 0, 0, 0],
                                [2, 0, 0, 0, 0, 0, 0, 0, 0],
                                [3, 0, 0, 0, 0, 0, 0, 0, 0],
                                [3, 0, 0, 0, 0, 0, 0, 0, 0],
                                [4, 2, 0, 0, 0, 0, 0, 0, 0],
                                [4, 2, 0, 0, 0, 0, 0, 0, 0],
                                [4, 3, 0, 0, 0, 0, 0, 0, 0],
                                [4, 3, 0, 0, 0, 0, 0, 0, 0],
                                [4, 3, 2, 0, 0, 0, 0, 0, 0],
                                [4, 3, 2, 0, 0, 0, 0, 0, 0]
                            ]
                        }
                    ]
                },
                {
                    "action": "ADD_FEATURE",
                    "name": "Destruição Divina",
                    "description": "Quando você atingir uma criatura com um ataque corpo-a-corpo com arma, você pode gastar um espaço de magia...",
                    "operations": [
                        { "action": "ADD_ACTION", "name": "Destruição Divina", "cost": [{ "type": "spell_slot", "min_level": 1 }] }
                    ]
                }
            ]
        },
        "level_3": {
            "operations": [
                { "action": "INCREMENT", "property": "properties.level.Paladino", "value": 1 },
                {
                    "action": "ADD_FEATURE",
                    "name": "Saúde Divina",
                    "description": "A magia divina flui através de você tornando você imune a doenças."
                },
                {
                    "action": "ADD_FEATURE",
                    "name": "Canalizar Divindade",
                    "description": "Seu juramento permite que você canalize energia divina.",
                    "counter": "resources.canalizar_divindade",
                    "operations": [
                        { 
                            "action": "INIT", "property": "resources.canalizar_divindade", 
                            "type": "counter", "value": 1, "recoversOn": "short_rest" }
                    ]
                },
                {
                    "action": "ADD_FEATURE",
                    "name": "Juramento Sagrado",
                    "description": "Você faz um juramento que torna-o um paladino para sempre.",
                    "operations": [
                        { 
                            "action": "CHOOSE_MAP", "n": 1, "label": "Juramento Sagrado",
                            "options": { "action": "REQUEST", "query": "subclasses/metadata.class == 'Paladino'/keys" },
                            "operations": [{ "action": "SET", "property": "properties.Paladino.subclass", "value": "{THIS}" }]
                        }
                    ]
                },
                { "action": "IMPORT", "query": "subclasses/{properties.Paladino.subclass}/level_3" }
            ]
        },
        "level_4": {
            "operations": [
                { "action": "INCREMENT", "property": "properties.level.Paladino", "value": 1 },
                {"action": "Ability_Score_Improvement"}
            ]
        },
        "level_5": {
            "operations": [
                { "action": "INCREMENT", "property": "properties.level.Paladino", "value": 1 },
                {
                    "action": "ADD_FEATURE",
                    "name": "Ataque Extra",
                    "description": "Você pode atacar duas vezes, ao invés de uma, sempre que você realizar a ação de Ataque no seu turno.",
                    "operations":[
                        {
                            "action": "ADD_ACTION", 
                            "name": "Ataque Extra", 
                            "cost": {"action": "action"},
                            "description": "Como parte da sua ação de ataque, você pode realizar uma segunda ação de ataque."
                        }
                    ]
                },
                { "action": "IMPORT", "query": "subclasses/name = properties.Paladino.subclass/level_5" }
            ]
        },
        "level_6": {
            "operations": [
                { "action": "INCREMENT", "property": "properties.level.Paladino", "value": 1 },
                {
                    "action": "ADD_FEATURE",
                    "name": "Aura de Proteção",
                    "description": "Sempre que você ou uma criatura amigável a até 3 metros de você tiver que fazer um teste de resistência, aquela criatura ganha um bônus igual a seu modificador de Carisma."
                }
            ]
        },
        "level_7": {
            "operations": [
                { "action": "INCREMENT", "property": "properties.level.Paladino", "value": 1 },
                { "action": "IMPORT", "query": "subclasses/name = properties.Paladino.subclass/level_7" }
            ]
        },
        "level_8": {
            "operations": [
                { "action": "INCREMENT", "property": "properties.level.Paladino", "value": 1 },
                {"action": "Ability_Score_Improvement"}
            ]
        },
        "level_9": {
            "operations": [
                { "action": "INCREMENT", "property": "properties.level.Paladino", "value": 1 },
                { "action": "IMPORT", "query": "subclasses/name = properties.Paladino.subclass/level_9" }
            ]
        },
        "level_10": {
            "operations": [
                { "action": "INCREMENT", "property": "properties.level.Paladino", "value": 1 },
                {
                    "action": "ADD_FEATURE",
                    "name": "Aura de Coragem",
                    "description": "Você e as criaturas amigáveis dentro de um raio de 3 metros de você não podem ser amedrontadas enquanto você estiver consciente."
                }
            ]
        }
    }
}